{"version":3,"file":"SubMenu.js","sources":["../../../../src/components/Menu/SubMenu.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { CSSProperties, ReactElement, useEffect, useRef, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { useStyles2 } from '../../themes';\nimport { Icon } from '../Icon/Icon';\n\nimport { MenuItemProps } from './MenuItem';\nimport { useMenuFocus } from './hooks';\nimport { isElementOverflowing } from './utils';\n\n/** @internal */\nexport interface SubMenuProps {\n  /** List of menu items of the subMenu */\n  items?: Array<ReactElement<MenuItemProps>>;\n  /** Open */\n  isOpen: boolean;\n  /** Marks whether subMenu was opened with arrow */\n  openedWithArrow: boolean;\n  /** Changes value of openedWithArrow */\n  setOpenedWithArrow: (openedWithArrow: boolean) => void;\n  /** Closes the subMenu */\n  close: () => void;\n  /** Custom style */\n  customStyle?: CSSProperties;\n}\n\n/** @internal */\nexport const SubMenu = React.memo(\n  ({ items, isOpen, openedWithArrow, setOpenedWithArrow, close, customStyle }: SubMenuProps) => {\n    const styles = useStyles2(getStyles);\n    const localRef = useRef<HTMLDivElement>(null);\n    const [handleKeys] = useMenuFocus({\n      localRef,\n      isMenuOpen: isOpen,\n      openedWithArrow,\n      setOpenedWithArrow,\n      close,\n    });\n\n    const [pushLeft, setPushLeft] = useState(false);\n    useEffect(() => {\n      if (isOpen && localRef.current) {\n        setPushLeft(isElementOverflowing(localRef.current));\n      }\n    }, [isOpen]);\n\n    return (\n      <>\n        <div className={styles.iconWrapper} aria-hidden data-testid={selectors.components.Menu.SubMenu.icon}>\n          <Icon name=\"angle-right\" className={styles.icon} />\n        </div>\n        {isOpen && (\n          <div\n            ref={localRef}\n            className={cx(styles.subMenu, { [styles.pushLeft]: pushLeft })}\n            data-testid={selectors.components.Menu.SubMenu.container}\n            style={customStyle}\n          >\n            <div tabIndex={-1} className={styles.itemsWrapper} role=\"menu\" onKeyDown={handleKeys}>\n              {items}\n            </div>\n          </div>\n        )}\n      </>\n    );\n  }\n);\n\nSubMenu.displayName = 'SubMenu';\n\n/** @internal */\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    iconWrapper: css({\n      display: 'flex',\n      flex: 1,\n      justifyContent: 'end',\n    }),\n    icon: css({\n      opacity: 0.7,\n      marginLeft: theme.spacing(1),\n      color: theme.colors.text.secondary,\n    }),\n    itemsWrapper: css({\n      background: theme.colors.background.primary,\n      boxShadow: theme.shadows.z3,\n      display: 'inline-block',\n      borderRadius: theme.shape.radius.default,\n    }),\n    pushLeft: css({\n      right: '100%',\n      left: 'unset',\n    }),\n    subMenu: css({\n      position: 'absolute',\n      top: 0,\n      left: '100%',\n      zIndex: theme.zIndex.dropdown,\n    }),\n  };\n};\n"],"names":["React"],"mappings":"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"}